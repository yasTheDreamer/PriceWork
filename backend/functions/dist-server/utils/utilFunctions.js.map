{"version":3,"sources":["../../../server/utils/utilFunctions.js"],"names":["filterData","data","filteredData","min","getMin","max","getMax","averageSalary","total","Object","values","length","console","log","records","salaries","forEach","record","salary","push","getSum","num","Math","round","array","arr","sum","reduce","constructUser","req","us","user","User","body","withSalary","jobTitle","withJobTitle","experience","withYearsOfExperience","email","withEmailAdress","socialLogin1","withSocialInfo1Login","socialLogin2","address","city","withCity","state","withState","zipCode","withZipCode","build","updateSessionToken","key","res","session","token","status","send","setListing","snapshot","currentSnapshot","val"],"mappings":"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","sourcesContent":["import User from \"../models/User\";\r\n\r\nexport const filterData = (data) => {\r\n  let filteredData = {};\r\n\r\n  filteredData.min = getMin(data);\r\n  filteredData.max = getMax(data);\r\n  filteredData.averageSalary = averageSalary(data);\r\n  filteredData.total = Object.values(data).length;\r\n  console.log(filteredData);\r\n\r\n  return filteredData;\r\n};\r\n\r\nexport const getMin = (data) => {\r\n  let records = Object.values(data);\r\n  let salaries = [];\r\n  let min;\r\n\r\n  records.forEach((record) => {\r\n    if (record.salary) {\r\n      salaries.push(record.salary);\r\n    }\r\n  });\r\n\r\n  if (salaries[0]) min = salaries[0];\r\n\r\n  salaries.forEach((salary) => {\r\n    if (salary < min) {\r\n      min = salary;\r\n    }\r\n  });\r\n\r\n  return min;\r\n};\r\n\r\nexport const getMax = (data) => {\r\n  let records = Object.values(data);\r\n  let salaries = [];\r\n  let max;\r\n\r\n  records.forEach((record) => {\r\n    if (record.salary) {\r\n      salaries.push(record.salary);\r\n    }\r\n  });\r\n\r\n  if (salaries[0]) max = salaries[0];\r\n\r\n  salaries.forEach((salary) => {\r\n    if (salary > max) {\r\n      max = salary;\r\n    }\r\n  });\r\n\r\n  return max;\r\n};\r\n\r\nconst getSum = (total, num) => {\r\n  return total + Math.round(num);\r\n};\r\n\r\nexport const averageSalary = (data) => {\r\n  let array = Object.values(data);\r\n  let salaries = [];\r\n\r\n  array.forEach((arr) => {\r\n    if (arr.salary) salaries.push(arr.salary);\r\n  });\r\n\r\n  console.log(array);\r\n\r\n  let sum = salaries.reduce(getSum, 0);\r\n\r\n  console.log(\"sum : \", sum);\r\n  console.log(\"length : \", salaries.length);\r\n\r\n  return sum / salaries.length;\r\n};\r\n\r\nexport const constructUser = (req, us) => {\r\n  let user = null;\r\n\r\n  if (us) user = new User(us);\r\n  else user = new User();\r\n\r\n  if (req.body.salary && !user.User.salary) user.withSalary(req.body.salary);\r\n  if (req.body.jobTitle && !user.User.jobTitle)\r\n    user.withJobTitle(req.body.jobTitle);\r\n  if (req.body.experience && !user.User.experience)\r\n    user.withYearsOfExperience(req.body.experience);\r\n  if (req.body.email && !user.User.email) user.withEmailAdress(req.body.email);\r\n  if (req.body.socialLogin1 && !user.User.socialLogin1)\r\n    user.withSocialInfo1Login(req.body.socialLogin1);\r\n  if (req.body.socialLogin2 && !user.User.socialLogin2)\r\n    user.withSocialInfo1Login(req.body.socialLogin2);\r\n  if (req.body.address.city && user.User.address && !user.User.address.city)\r\n    user.withCity(req.body.address.city);\r\n  if (req.body.address.state && user.User.address && !user.User.address.state)\r\n    user.withState(req.body.address.state);\r\n  if (\r\n    req.body.address.zipCode &&\r\n    user.User.address &&\r\n    !user.User.address.zipCode\r\n  )\r\n    user.withZipCode(req.body.address.zipCode);\r\n\r\n  return user.build();\r\n};\r\n\r\nexport const updateSessionToken = (key, req, res) => {\r\n  if (key) {\r\n    req.session.token = key;\r\n    res.status(200).send(\"data saved\");\r\n  } else {\r\n    res.status(500).send(\"data could not be saved\");\r\n  }\r\n};\r\n\r\nexport const setListing = (snapshot) => {\r\n  let currentSnapshot;\r\n\r\n  currentSnapshot = snapshot.val();\r\n\r\n  return currentSnapshot;\r\n};\r\n"],"file":"utilFunctions.js"}